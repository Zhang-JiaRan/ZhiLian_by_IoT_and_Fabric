# 基于IoT和Fabric的智慧货运管理系统

## 1、系统功能

基于IoT的在途跟踪和安全保障功能。系统通过GPS及时采集快递车的位置信息，实现车辆的实时在途跟踪。通过温度、湿度、烟雾传感器采集车内温湿度以及烟雾浓度，防止部分特殊物品因为环境因素造成损坏。系统实时监控司机的状态，通过人工智能技术识别司机疲劳状态，并提醒司机，降低因司机疲劳驾驶导致安全事故发生的概率。

基于区块链技术的信息追溯和隐私保护功能。系统采用区块链技术，从供应链的源头开始，利用物联网、互联网的物品身份标识以及传感器等技术，可以将快递包裹运输过程所有的信息都实时地记录在区块链上，透明安全且不可篡改，实现了快递包裹运输全过程信息可追溯的功能。此外，区块链技术能够确保交易数据不被篡改，在此基础上我们设计了一个基于层次身份的加密算法，并利用该算法对快递用户信息进行分段加密，保障用户的隐私安全。

基于改进的遗传-蚁群融合算法的路径规划功能。系统采用基于改进的遗传-蚁群融合算法的路径规划方法，该方法综合利用了遗传算法的全局随机搜索能力和蚁群算法的优化特性，在路径规划过程中能够快速收敛，避免陷入局部最优解，同时还能够获得较低的总运输成本。且此算法综合考虑了快递运输车辆的固定和行驶成本、时间惩罚成本以及货损成本等多种因素，具备较高的实际应用价值，提高了配送效率，降低了运输配送成本。

## 2、总体设计

​	系统主要由三层组成，包括**感知层/网关层**、**云层**和**应用层**。其中，感知层/网关层位于系统硬件部分，负责采集数据并上传至云平台和云服务器。云层包括云平台和云服务器，实现数据处理和分布式存储，同时搭建联盟链网络，确保数据可追溯。在应用层中，可以通过Web网页端来管理车辆、司机和配送信息，以及查看车辆实时数据。小程序则作为用户端，提供配送过程中实时数据查看和路径导航等功能。
### 2.1 感知层/网关层设计
感知层主要由STM32数据采集部分和树莓派边缘计算部分组成。其中STM32单片机部分又分为RFID手持端和数据采集网关端。前者主要负责采集司机、车辆、货物的RFID编号并传输至网关节点进行人-车-货识别，后者的工作是通过传感器采集车内数据并通过MQTT协议上传至云平台和云服务器。
### 2.2 云层设计
按照快递物流配送路径优化业务流程，本小节对系统的数据库部分进行设计，系统用到的数据表主要有：管理员信息表（admin）、司机信息表(driver)、车辆信息表(vehicle)、运输信息表(transport)、实时监控数据表（monitor）等。
为确保数据安全存储，本系统采用基于Docker的Fabric开源联盟链技术进行信息安全设计，也就是分布式账本记录方式，将不同的节点构建成不同的组织，基于组织之间的协作来实现数据的同步和备份。该技术可单服务器开发、多服务器部署，确保数据安全稳定。联盟链具有多个参与方，所有交易必须得到所有参与方认可，提高了数据安全性、可靠性，减少维护成本，有利于企业发展。
### 2.3 应用层设计
应用层主要分为两大部分，分别是网页管理员端和小程序用户端。前者网页端主要面向的是系统的管理员和维护人员，针对全部司机和车辆的信息进行管理，统筹安排司机的多目的地路径优化问题。后者小程序端面向的是司机用户，可以实时查看本车的各类参数和车辆状况，根据路径规划确定配送的最优路线，极大提高司机的配送效率。

